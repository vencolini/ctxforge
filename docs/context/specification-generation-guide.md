# Specification Generation Guide for LLMs

**Purpose:** Guide LLMs in creating comprehensive behavioral specifications using ctxforge methodology and gathered context.

---

## Specification Generation Process

### Input Sources
1. **User Intent** - Original description from user
2. **Project Context** - Technology stack, existing patterns, performance directives
3. **Additional Context** - Answers to discovery questions
4. **Domain Knowledge** - Best practices and patterns from domain-knowledge-patterns.md

### Output Requirements
Generate a complete behavioral specification following ctxforge template structure.

---

## Specification Structure Template

```markdown
# Behavioral Specification: [Feature Name]

**Created:** [Date]
**Generated by:** ctxforge LLM-driven context discovery
**Project Type:** [From project analysis]
**Tech Stack:** [From project analysis]

## User Intent Analysis

**Original request:** "[User's exact words]"

**Understood requirements:**
- Feature type: [Derived from analysis]
- Target location: [Where in application]
- Primary user action: [What user does]
- Context factors: [Key considerations from additional context]

## User Scenarios

### SCENARIO 1: Happy Path
```gherkin
GIVEN [initial conditions based on context]
WHEN [user action with specific details]
THEN [expected outcome with performance criteria]
AND [additional outcomes and feedback]
```

### SCENARIO 2: Error Handling
```gherkin
GIVEN [error conditions specific to this feature]
WHEN [user encounters error situation]
THEN [clear error messaging and guidance]
AND [recovery or alternative path]
```

### SCENARIO 3: Edge Cases
```gherkin
GIVEN [edge case conditions from domain knowledge]
WHEN [user interaction in edge case]
THEN [graceful handling with fallbacks]
AND [maintained functionality or clear limitations]
```

### SCENARIO 4+: [Additional scenarios based on context]
[Add more scenarios based on complexity and additional context gathered]

## Success Criteria

✓ [Functional requirements from user intent]
✓ [Performance requirements from context]
✓ [Accessibility requirements from best practices]
✓ [Consistency requirements from existing patterns]
✓ [Domain-specific requirements from knowledge patterns]

## Technical Implementation Notes

**Technology Stack:** [From project context]

**Performance Directives to Apply:**
[List relevant PD-XXX patterns from project context]

**Domain Best Practices:**
[Relevant patterns from domain-knowledge-patterns.md]

**Integration Points:**
- [Existing patterns to follow]
- [APIs or services to integrate with]
- [Design system components to use]

**Additional Context Applied:**
[How answers to discovery questions influenced the specification]

## Next Steps

1. Review this specification for completeness
2. Customize based on specific project requirements
3. Begin implementation with your LLM tool
4. Apply ctxforge validation throughout development

---

*This specification was generated using ctxforge's LLM-driven context discovery. Review and customize as needed for your specific requirements.*
```

---

## Content Generation Guidelines

### User Intent Analysis Section
- **Quote user exactly** - preserve their language and intent
- **Extract key factors** - feature type, location, primary action
- **Note context influences** - how additional context shaped understanding

### User Scenarios Section
- **Use Gherkin format** for clarity and testability
- **Be specific** about conditions, actions, and outcomes
- **Include performance criteria** (response times, limits, etc.)
- **Cover error paths** comprehensively
- **Consider domain patterns** from knowledge base
- **Add scenarios** based on complexity revealed in context discovery

### Success Criteria Section
- **Make criteria testable** - avoid vague statements
- **Include performance metrics** when relevant
- **Cover accessibility** requirements
- **Ensure consistency** with existing project patterns
- **Reference domain standards** where applicable

### Technical Notes Section
- **Apply existing PD patterns** from project context
- **Reference domain best practices** relevant to feature type
- **Note integration requirements** with existing systems
- **Explain context influence** on technical decisions

---

## Context Integration Examples

### Example 1: Search Feature with Scale Context

**User Request:** "Add search to products page"
**Context Gathered:** 10,000+ products, need instant results
**Generated Scenario:**
```gherkin
GIVEN user is on products page with 15,000 products loaded
WHEN user types in search field
THEN results appear within 200ms (debounced at 300ms)
AND loading indicator shows during search
AND results are limited to top 50 matches for performance
```

### Example 2: Upload Feature with Processing Context

**User Request:** "Users need to upload profile pictures"
**Context Gathered:** Auto-resize to 200x200, JPEG/PNG only, 5MB limit
**Generated Scenario:**
```gherkin
GIVEN user is on profile settings page
WHEN user uploads valid image file (JPEG/PNG, <5MB)
THEN image is automatically resized to 200x200 pixels
AND preview shows immediately
AND upload progress indicates processing status
AND success confirmation shows when complete
```

---

## Quality Checklist

Before finalizing specification:

- [ ] All user scenarios are specific and testable
- [ ] Performance criteria are included where relevant
- [ ] Error handling covers likely failure modes
- [ ] Success criteria are measurable
- [ ] Domain best practices are applied
- [ ] Project context influences are noted
- [ ] Technical notes reference existing patterns
- [ ] Additional context is properly integrated

---

## Common Pitfalls to Avoid

### Don't:
- Generate vague or untestable scenarios
- Ignore project-specific performance directives
- Forget to apply domain knowledge patterns
- Create specifications without considering existing project patterns
- Make assumptions not supported by gathered context

### Do:
- Use specific, measurable criteria
- Apply relevant performance directives
- Reference domain patterns appropriately
- Maintain consistency with project context
- Explain how additional context influenced decisions

---

**Remember:** The specification should be comprehensive enough that any LLM can implement the feature correctly while following the project's established patterns and performance requirements.